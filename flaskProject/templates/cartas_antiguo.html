<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juego de Cartas</title>
    <link rel="stylesheet" , href="../cartaMasAlta/carta_mas_alta.css" , type="text/css">
    <style>
        body {
            /*background-color: white;*/
            background-image: url("https://w.forfun.com/fetch/78/7896f6ea0115415d224a22fec720bcca.jpeg");
            /*
            MAS OPCIONES
            https://images5.alphacoders.com/486/486724.jpg
            https://i.pinimg.com/originals/8a/ce/f9/8acef94854c49aab2db1e0f959ce1737.jpg
            https://images2.alphacoders.com/105/105962.jpg      ACTUAL
            https://w.forfun.com/fetch/78/7896f6ea0115415d224a22fec720bcca.jpeg
            https://img3.wallspic.com/crops/5/2/8/9/3/139825/139825-para_jugar_a_las_cartas-3840x2160.jpg
            */
            /*background-repeat: no-repeat;*/
            /*background-attachment: fixed;*/
            /*background-position: center;*/
            background-size: cover;
            text-align: center;
            color: white;
        }
        h1{
            text-align: center;
            padding-top: 200px;
            font-size: xxx-large;
            color: #910000;
            -webkit-text-stroke-width: 0.2px;
            -webkit-text-stroke-color: white;
        }
        ol {
            text-align: left;
            padding-left: 600px;
        }
        li::marker{
            font-weight: bold;
        }
        button{
            display: block;
            margin: auto;
            margin-bottom: 20px;
            padding: 10px 20px;
            background-color: darkgoldenrod;
            color: #fff;
            border: 1px solid black;
            border-radius: 5px;
            cursor: pointer;
        }
        #titulo{
            padding: 2px;
        }
        #resultado{
            padding-top: 10px;
            color: white;
        }
        #saldo {
            font-size: 24px;
            color: darkgoldenrod;
            margin-top: 10px;
            margin-bottom: 20px;
            -webkit-text-stroke-width: 0.1px;
            -webkit-text-stroke-color: lightgoldenrodyellow;
        }
        #apuesta {
            padding-left: 50px;
        }
        label{
            color: white;
            text-decoration: underline;
        }
        #resultado-apuesta {
            font-size: 16px;
            margin-top: 10px;
            color: #ffd700;
        }
        #mensaje {
            font-size: 16px;
            margin-top: 10px;
            color: #ff4500;
        }
        /*
        PONER UN COLOR DE FONDO EN EL CENTRO Y AHI HACER LA MESA ETC
         */
    </style>
</head>
<body>
<div id="container">
    <div id="titulo">
        <h1>Juego de Cartas</h1>
        <div id="saldo">Saldo actual: 100</div>
        <button onclick="iniciarJuego()"> Repartir </button>
    </div>

    <label for="apuesta">Apuesta:</label>
    <input type="number" id="apuesta" min="1" max="100">
    <div id="resultado"></div>
    <div id="resultado-apuesta"></div>
    <div id="mensaje"></div>
</div>
    <script>
        // Función para crear una baraja de cartas de poker
        function crearBaraja() {
            const palos = ['\u2660', '\u2663', '\u2665', '\u2666'];
            const valores = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];
            const baraja = [];
            for (const palo of palos) {
                for (const valor of valores) {
                    baraja.push(`${valor} ${palo}`);
                }
            }
            return baraja;
        }

        // Función para obtener una carta aleatoria de la baraja
        function obtenerCartaAleatoria(baraja) {
            const indice = Math.floor(Math.random() * baraja.length);
            return baraja.splice(indice, 1)[0];
        }

        // Función para comparar dos cartas por su valor
        function compararCartas(cartas) {
            const valorCartaUsuario = obtenerValorCarta(cartas.usuario);
            const valorCartaCroupier = obtenerValorCarta(cartas.croupier);

            if (valorCartaUsuario > valorCartaCroupier) {
                return '¡KONGUITO GANADOOORRR!';
            } else if (valorCartaUsuario < valorCartaCroupier) {
                return 'Konguito caido... :´(';
            } else {
                return 'Ninguno, hay empate';
            }
        }

        // Función para obtener el valor numérico de una carta
        function obtenerValorCarta(carta) {
            const valor = carta.split(' ')[0];
            const valores = { '2': 2, '3': 3, '4': 4, '5': 5, '6': 6, '7': 7, '8': 8, '9': 9, '10': 10, 'J': 11, 'Q': 12, 'K': 13, 'A': 14 };
            return valores[valor];
        }

        // Variables globales para el saldo y la apuesta
        let saldo = 100;
        let apuesta = 0;

        //funcion para poder apostar y actualizar el saldo
        function apostar(apuesta, resultado) {
            if(saldo > 0 && apuesta <= saldo) {
                let gananciaPerdida = 0;
                if (resultado === '¡KONGUITO GANADOOORRR!') {
                    gananciaPerdida = apuesta;
                    saldo += apuesta;
                } else if (resultado === 'Konguito caido... :´(') {
                    gananciaPerdida = -apuesta;
                    saldo -= apuesta;
                } else if (resultado === 'Ninguno, hay empate') {
                    gananciaPerdida = -apuesta / 2;
                    saldo -= apuesta / 2;
                }
                // Muestra el resultado de la apuesta
                document.getElementById('resultado-apuesta').textContent = `Ganador: ${resultado}`;
                document.getElementById('mensaje').textContent = `Ganancias/Pérdidas: ${gananciaPerdida}`;
            } else {
                // Mostrar un mensaje de error si no cumple las condiciones
                document.getElementById('resultado-apuesta').textContent = `No puedes realizar esa apuesta.`;
                document.getElementById('mensaje').textContent = ``;
            }
        }

        // Función principal para iniciar el juego
        function iniciarJuego() {
            const baraja = crearBaraja();
            const cartas = {
                usuario: [obtenerCartaAleatoria(baraja), obtenerCartaAleatoria(baraja), obtenerCartaAleatoria(baraja)],
                croupier: obtenerCartaAleatoria(baraja),
            };
            const cartaElegida = prompt(`Elige una carta (1, 2 o 3):`);
            const cartaUsuario = cartas.usuario[cartaElegida - 1];
            const resultado = compararCartas({ usuario: cartaUsuario, croupier: cartas.croupier });
            document.getElementById('resultado').innerHTML = `<br>Carta del croupier: ${cartas.croupier}<br>Tu carta: ${cartaUsuario}<br>Tus opciones eran: ${cartas.usuario.join(', ')}`;

            // Pide la apuesta al usuario
            apuesta = parseInt(document.getElementById('apuesta').value);

            // Realiza la apuesta
            apostar(apuesta, resultado);

            // Muestra el saldo actualizado
            document.getElementById('saldo').textContent = `Saldo actual: ${saldo}`;
        }
    </script>
</body>
</html>